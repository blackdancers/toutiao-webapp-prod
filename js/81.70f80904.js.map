{"version":3,"file":"js/81.70f80904.js","mappings":"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","sources":["webpack://toutiao-webapp/./src/views/article/index.vue","webpack://toutiao-webapp/./src/components/Article/FollowUser.vue","webpack://toutiao-webapp/src/components/Article/FollowUser.vue","webpack://toutiao-webapp/./src/components/Article/FollowUser.vue?c49d","webpack://toutiao-webapp/./src/components/Article/FollowUser.vue?a580","webpack://toutiao-webapp/./src/components/Article/ArticleCollected.vue","webpack://toutiao-webapp/src/components/Article/ArticleCollected.vue","webpack://toutiao-webapp/./src/components/Article/ArticleCollected.vue?6f94","webpack://toutiao-webapp/./src/components/Article/ArticleCollected.vue?4027","webpack://toutiao-webapp/./src/components/Article/ArticleLike.vue","webpack://toutiao-webapp/src/components/Article/ArticleLike.vue","webpack://toutiao-webapp/./src/components/Article/ArticleLike.vue?dda1","webpack://toutiao-webapp/./src/components/Article/ArticleLike.vue?5c97","webpack://toutiao-webapp/./src/components/Article/CommentList.vue","webpack://toutiao-webapp/./src/components/Article/CommentItem.vue","webpack://toutiao-webapp/src/components/Article/CommentItem.vue","webpack://toutiao-webapp/./src/components/Article/CommentItem.vue?c982","webpack://toutiao-webapp/./src/components/Article/CommentItem.vue?97c2","webpack://toutiao-webapp/src/components/Article/CommentList.vue","webpack://toutiao-webapp/./src/components/Article/CommentList.vue?afc5","webpack://toutiao-webapp/./src/components/Article/CommentList.vue?3937","webpack://toutiao-webapp/./src/components/Article/CommentPost.vue","webpack://toutiao-webapp/src/components/Article/CommentPost.vue","webpack://toutiao-webapp/./src/components/Article/CommentPost.vue?fcf7","webpack://toutiao-webapp/./src/components/Article/CommentPost.vue?6d43","webpack://toutiao-webapp/./src/components/Article/CommentReply.vue","webpack://toutiao-webapp/src/components/Article/CommentReply.vue","webpack://toutiao-webapp/./src/components/Article/CommentReply.vue?f384","webpack://toutiao-webapp/./src/components/Article/CommentReply.vue?0524","webpack://toutiao-webapp/src/views/article/index.vue","webpack://toutiao-webapp/./src/views/article/index.vue?f7d5","webpack://toutiao-webapp/./src/views/article/index.vue?09af","webpack://toutiao-webapp/./src/api/user.js","webpack://toutiao-webapp/./src/api/article.js","webpack://toutiao-webapp/./src/api/channel.js","webpack://toutiao-webapp/./src/api/home.js","webpack://toutiao-webapp/./src/api/comment.js","webpack://toutiao-webapp/./src/api/index.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"article-container\"},[_c('van-nav-bar',{staticClass:\"page-nav-bar\",attrs:{\"fixed\":\"\",\"left-arrow\":\"\",\"title\":\"黑马头条\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('div',{staticClass:\"main-wrap\"},[(_vm.loading)?_c('div',{staticClass:\"loading-wrap\"},[_c('van-loading',{attrs:{\"color\":\"#3296fa\",\"vertical\":\"\"}},[_vm._v(\"加载中\")])],1):(_vm.article.title)?_c('div',{staticClass:\"article-detail\"},[_c('h1',{staticClass:\"article-title\"},[_vm._v(_vm._s(_vm.article.title))]),_c('van-cell',{staticClass:\"article-author\",scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('van-image',{staticClass:\"avatar\",attrs:{\"round\":\"\",\"fit\":\"cover\",\"src\":\"https://img.yzcdn.cn/vant/cat.jpeg\"}})]},proxy:true},{key:\"title\",fn:function(){return [_c('div',{staticClass:\"author-name\"},[_vm._v(_vm._s(_vm.article.aut_name))])]},proxy:true},{key:\"label\",fn:function(){return [_c('div',{staticClass:\"publish-date\"},[_vm._v(_vm._s(_vm._f(\"relativeTime\")(_vm.article.pubdate)))])]},proxy:true},{key:\"right-icon\",fn:function(){return [_c('FollowUser',{attrs:{\"isFollowed\":_vm.article.is_followed,\"authorId\":_vm.article.aut_id},on:{\"update:isFollowed\":function($event){return _vm.$set(_vm.article, \"is_followed\", $event)},\"update:is-followed\":function($event){return _vm.$set(_vm.article, \"is_followed\", $event)}}})]},proxy:true}])}),_c('div',{ref:\"article-content\",staticClass:\"article-content markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.article.content)}}),_c('van-divider',[_vm._v(\"正文结束\")]),_c('CommentList',{ref:\"comment-list\",staticClass:\"comment-list\",attrs:{\"targetId\":_vm.articleId,\"totalCount\":_vm.totalCommentCount},on:{\"update:totalCount\":function($event){_vm.totalCommentCount=$event},\"update:total-count\":function($event){_vm.totalCommentCount=$event},\"scroll\":_vm.onScroll,\"reply-click\":_vm.onReplyClick}})],1):(_vm.error === 404)?_c('div',{staticClass:\"error-wrap\"},[_c('van-icon',{attrs:{\"name\":\"failure\"}}),_c('p',{staticClass:\"text\"},[_vm._v(\"该资源不存在或已删除！\")])],1):_c('div',{staticClass:\"error-wrap\"},[_c('van-icon',{attrs:{\"name\":\"failure\"}}),_c('p',{staticClass:\"text\"},[_vm._v(\"内容加载失败！\")]),_c('van-button',{staticClass:\"retry-btn\",on:{\"click\":_vm.loadArtcileInfo}},[_vm._v(\"点击重试\")])],1)]),_c('div',{staticClass:\"article-comment\"},[_c('van-button',{staticClass:\"comment-btn\",attrs:{\"type\":\"default\",\"round\":\"\",\"size\":\"small\"},on:{\"click\":function($event){_vm.isPostShow = true}}},[_vm._v(\"写评论\")]),_c('van-icon',{attrs:{\"color\":\"#777\",\"name\":\"comment-o\",\"badge\":_vm.totalCommentCount},on:{\"click\":_vm.jump}}),_c('ArticleCollected',{attrs:{\"articleId\":_vm.article.art_id},model:{value:(_vm.article.is_collected),callback:function ($$v) {_vm.$set(_vm.article, \"is_collected\", $$v)},expression:\"article.is_collected\"}}),_c('ArticleLike',{attrs:{\"attitude\":_vm.article.attitude,\"articleId\":_vm.article.art_id},on:{\"update:attitude\":function($event){return _vm.$set(_vm.article, \"attitude\", $event)}}}),_c('van-icon',{attrs:{\"color\":\"#777\",\"name\":\"share\"}})],1),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.isPostShow),callback:function ($$v) {_vm.isPostShow=$$v},expression:\"isPostShow\"}},[_c('CommentPost',{attrs:{\"targetId\":_vm.article.art_id},on:{\"postSuccess\":_vm.onPostSuccess}})],1),_c('van-popup',{staticStyle:{\"height\":\"100%\"},attrs:{\"position\":\"bottom\"},model:{value:(_vm.isReplyShow),callback:function ($$v) {_vm.isReplyShow=$$v},expression:\"isReplyShow\"}},[(_vm.isReplyShow)?_c('CommentReply',{attrs:{\"comment\":_vm.currComment},on:{\"close\":function($event){_vm.isReplyShow = false}}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.isFollowed)?_c('van-button',{staticClass:\"follow-btn\",attrs:{\"round\":\"\",\"size\":\"small\",\"loading\":_vm.followLoading},on:{\"click\":_vm.onFollow}},[_vm._v(\" 已关注 \")]):_c('van-button',{staticClass:\"follow-btn\",attrs:{\"type\":\"info\",\"color\":\"#3296fa\",\"round\":\"\",\"size\":\"small\",\"icon\":\"plus\",\"loading\":_vm.followLoading},on:{\"click\":_vm.onFollow}},[_vm._v(\"关注\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-button class=\"follow-btn\" round size=\"small\" v-if=\"isFollowed\" @click=\"onFollow\" :loading=\"followLoading\">\r\n      已关注\r\n    </van-button>\r\n    <van-button class=\"follow-btn\" type=\"info\" color=\"#3296fa\" round size=\"small\" icon=\"plus\" v-else\r\n      :loading=\"followLoading\" @click=\"onFollow\">关注</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addFollowAPI, deleteFollowAPI } from '@/api/index'\r\nexport default {\r\n  name: 'FollowUser',\r\n  // model: { // 第三种方式不要\r\n  //   prop: 'isFollowed',\r\n  //   event: 'updateFollowed'\r\n  // },\r\n  props: {\r\n    // value: {  //使用{{ value }}\r\n    //   type: Boolean,\r\n    //   default: true\r\n    // },\r\n    isFollowed: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    authorId: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      followLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 关注和取消关注\r\n    async onFollow () {\r\n      this.followLoading = true\r\n      try {\r\n        if (this.isFollowed) {\r\n          await deleteFollowAPI(this.authorId)\r\n        } else {\r\n          await addFollowAPI(this.authorId)\r\n        }\r\n        // 更新页面上的关注状态\r\n        // this.article.is_followed = !this.article.is_followed\r\n        // 1.由父组件处理\r\n        // this.$emit('updateFollowed', !this.isFollowed)\r\n\r\n        // this.$emit('input', !this.isFollowed) //默认\r\n        // 2.自定义事件方法\r\n        // this.$emit('updateFollowed', !this.isFollowed)\r\n        // 3.固定写法\r\n        this.$emit('update:isFollowed', !this.isFollowed)\r\n      } catch (error) {\r\n        if (error.response && error.response.status === 401) {\r\n          this.$toast(error.response.data.message)\r\n        } else { this.$toast('操作失败,请重试') }\r\n      }\r\n      this.followLoading = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FollowUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FollowUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FollowUser.vue?vue&type=template&id=2a2e5447&\"\nimport script from \"./FollowUser.vue?vue&type=script&lang=js&\"\nexport * from \"./FollowUser.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-button',{class:{ collected: _vm.value },attrs:{\"icon\":_vm.value ? 'star' : 'star-o',\"loading\":_vm.loading},on:{\"click\":_vm.onCollected}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- <van-icon :name=\"value ? 'star' : 'star-o'\" :class=\"{ collected: value }\" :loading=\"loading\" @click=\"onCollected\" /> -->\r\n  <van-button :icon=\"value ? 'star' : 'star-o'\" :class=\"{ collected: value }\" :loading=\"loading\" @click=\"onCollected\" />\r\n</template>\r\n\r\n<script>\r\nimport { addCollectAPI, deleteCollectAPI } from '@/api/index'\r\nexport default {\r\n  name: 'ArticleCollected',\r\n  // 父组件使用v-model形式传递参数\r\n  props: {\r\n    value: { // article.is_collected 父组件-> 收藏状态\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    articleId: { // 文章ID\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      loading: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 收藏和取消收藏\r\n    async onCollected () {\r\n      this.loading = true\r\n      try {\r\n        if (this.value) {\r\n          // 已收藏要取消收藏\r\n          await deleteCollectAPI(this.articleId)\r\n        } else {\r\n          await addCollectAPI(this.articleId)\r\n        }\r\n        this.$emit('input', !this.value)\r\n\r\n        this.$toast.success(this.value ? '取消收藏' : '收藏成功')\r\n      } catch (error) {\r\n        if (error.response && error.response.status === 401) {\r\n          this.$toast(error.response.data.message)\r\n        } else { this.$toast('操作失败,请重试') }\r\n      }\r\n\r\n      setTimeout(() => {\r\n        this.loading = false\r\n      }, 1000)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.collected {\r\n  color: #ffa500;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleCollected.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleCollected.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleCollected.vue?vue&type=template&id=396ec682&scoped=true&\"\nimport script from \"./ArticleCollected.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleCollected.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleCollected.vue?vue&type=style&index=0&id=396ec682&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"396ec682\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-button',{class:{ liked: _vm.attitude === 1 },attrs:{\"icon\":_vm.attitude === 1 ? 'good-job' : 'good-job-o',\"loading\":_vm.loading},on:{\"click\":_vm.onLiked}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <van-button :icon=\"attitude === 1 ? 'good-job' : 'good-job-o'\" :class=\"{ liked: attitude === 1 }\" :loading=\"loading\"\r\n    @click=\"onLiked\" />\r\n</template>\r\n\r\n<script>\r\nimport { addLikeAPI, deleteLikeAPI } from '@/api/index'\r\nexport default {\r\n  name: 'ArticleLike',\r\n  // 父组件使用v-model形式传递参数\r\n  props: {\r\n    attitude: { // article.attitude 父组件-> 点赞(-1无,0未点赞,1已点赞)\r\n      type: Number,\r\n      default: -1\r\n    },\r\n    articleId: { // 文章ID\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      loading: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 文章点赞和取消点赞\r\n    async onLiked () {\r\n      this.loading = true\r\n      try {\r\n        let status = -1\r\n        if (this.attitude === 1) {\r\n          await deleteLikeAPI(this.articleId)\r\n        } else {\r\n          await addLikeAPI(this.articleId)\r\n          status = 1\r\n        }\r\n        this.$emit('update:attitude', status)\r\n\r\n        this.$toast.success(status === 1 ? '点赞成功' : '取消点赞')\r\n      } catch (error) {\r\n        if (error.response && error.response.status === 401) {\r\n          this.$toast(error.response.data.message)\r\n        } else { this.$toast('操作失败,请重试') }\r\n      }\r\n\r\n      this.loading = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.liked {\r\n  color: #e22829;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleLike.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleLike.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleLike.vue?vue&type=template&id=7ac31380&scoped=true&\"\nimport script from \"./ArticleLike.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleLike.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleLike.vue?vue&type=style&index=0&id=7ac31380&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ac31380\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comment-list\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"error\":_vm.error,\"error-text\":\"加载失败，请点击重试\",\"immediate-check\":false},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(comment,index){return _c('CommentItem',{key:index,attrs:{\"comment\":comment},on:{\"reply-click\":function($event){return _vm.$emit('reply-click', $event)}}})}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-cell',{staticClass:\"comment-item\",scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('van-image',{staticClass:\"avatar\",attrs:{\"round\":\"\",\"fit\":\"cover\",\"src\":_vm.comment.aut_photo}})]},proxy:true},{key:\"title\",fn:function(){return [_c('div',{staticClass:\"author-name\"},[_vm._v(_vm._s(_vm.comment.aut_name))])]},proxy:true},{key:\"label\",fn:function(){return [_c('p',{staticClass:\"comment-txt\"},[_vm._v(_vm._s(_vm.comment.content))]),_c('div',{staticClass:\"comment-info-btn\"},[_c('div',{staticClass:\"publish-date\"},[_vm._v(_vm._s(_vm._f(\"relativeTime\")(_vm.comment.pubdate)))]),_c('van-button',{staticClass:\"reply-btn\",attrs:{\"round\":\"\"},on:{\"click\":function($event){return _vm.$emit('reply-click', _vm.comment)}}},[_vm._v(\"回复\"+_vm._s(_vm.comment.reply_count)+\" \")])],1)]},proxy:true},{key:\"right-icon\",fn:function(){return [_c('van-button',{staticClass:\"like-btn\",class:{ like: _vm.comment.is_likeing },attrs:{\"icon\":_vm.comment.is_likeing ? 'good-job' : 'good-job-o',\"loading\":_vm.commentLoading},on:{\"click\":_vm.onCommentLike}},[_vm._v(\" \"+_vm._s(_vm.comment.like_count || '赞')+\" \")])]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <van-cell class=\"comment-item\">\r\n    <template #icon>\r\n      <van-image class=\"avatar\" round fit=\"cover\" :src=\"comment.aut_photo\" />\r\n    </template>\r\n    <template #title>\r\n      <div class=\"author-name\">{{ comment.aut_name }}</div>\r\n    </template>\r\n    <template #label>\r\n      <p class=\"comment-txt\">{{ comment.content }}</p>\r\n      <div class=\"comment-info-btn\">\r\n        <div class=\"publish-date\">{{ comment.pubdate | relativeTime }}</div>\r\n        <van-button round class=\"reply-btn\" @click=\"$emit('reply-click', comment)\">回复{{ comment.reply_count }}\r\n        </van-button>\r\n      </div>\r\n    </template>\r\n    <template #right-icon>\r\n      <van-button class=\"like-btn\" :icon=\"comment.is_likeing ? 'good-job' : 'good-job-o'\"\r\n        :class=\"{ like: comment.is_likeing }\" :loading=\"commentLoading\" @click=\"onCommentLike\">\r\n        {{ comment.like_count || '赞' }}\r\n      </van-button>\r\n    </template>\r\n  </van-cell>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * 评论-回复\r\n *\r\n * 子组件CommentItem -> 子组件 CommentList -> 父组件 ArticleIndex\r\n * CommentItem ：@click=\"$emit('reply-click', comment)\"\r\n * CommentList: @reply-click=\"$emit('reply-click', $event)\"\r\n * ArticleIndex: @reply-click=\"onReplyClick\"\r\n *\r\n *\r\n */\r\nimport { deleteCommentLikeAPI, addCommentLikeAPI } from '@/api/index'\r\n\r\nexport default {\r\n  name: 'CommentItem',\r\n  props: {\r\n    comment: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      commentClone: this.comment,\r\n      commentLoading: false\r\n    }\r\n  },\r\n  created () {\r\n    console.log(this.comment)\r\n  },\r\n  methods: {\r\n    async onCommentLike () {\r\n      this.commentLoading = true\r\n      try {\r\n        if (this.comment.is_liking) {\r\n          // 已赞，取消点赞\r\n          await deleteCommentLikeAPI(this.comment.com_id)\r\n          if (this.commentClone.like_count > 0) { this.commentClone.like_count-- }\r\n        } else {\r\n          // 没有点赞，添加点赞\r\n          await addCommentLikeAPI(this.comment.com_id)\r\n          this.commentClone.like_count++\r\n        }\r\n        this.commentClone.is_liking = !this.comment.is_liking\r\n      } catch (error) {\r\n        this.$toast('操作失败，请重试')\r\n      }\r\n\r\n      setTimeout(() => {\r\n        this.commentLoading = false // 请求执行后关闭\r\n      }, 1000)\r\n\r\n      // this.commentLoading = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.comment-item {\r\n  .avatar {\r\n    width: 70px;\r\n    height: 70px;\r\n    margin-right: 26px;\r\n  }\r\n\r\n  .author-name {\r\n    font-size: 24px;\r\n    color: #406599;\r\n  }\r\n\r\n  .comment-txt {\r\n    font-size: 32px;\r\n    color: #222;\r\n    word-break: break-all;\r\n    text-align: justify;\r\n  }\r\n\r\n  .comment-info-btn {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .publish-date {\r\n      font-size: 20px;\r\n      color: #222;\r\n      margin-right: 26px;\r\n    }\r\n\r\n    .reply-btn {\r\n      width: 130px;\r\n      height: 48px;\r\n      font-size: 24px;\r\n      color: #222;\r\n    }\r\n  }\r\n\r\n  .like-btn {\r\n    border: none;\r\n    height: 30px;\r\n    padding: 0;\r\n    font-size: 20px;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .like {\r\n    color: #e5645f;\r\n  }\r\n\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommentItem.vue?vue&type=template&id=af370f8a&scoped=true&\"\nimport script from \"./CommentItem.vue?vue&type=script&lang=js&\"\nexport * from \"./CommentItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CommentItem.vue?vue&type=style&index=0&id=af370f8a&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"af370f8a\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"comment-list\">\r\n    <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" :error=\"error\" error-text=\"加载失败，请点击重试\"\r\n      :immediate-check=\"false\" @load=\"onLoad\">\r\n      <CommentItem v-for=\"(comment, index) in list\" :key=\"index\" :comment=\"comment\"\r\n        @reply-click=\"$emit('reply-click', $event)\"></CommentItem>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * 复用组件：文章评论和回复内容的评论\r\n *\r\n */\r\nimport { getCommentsAPI } from '@/api/index.js'\r\nimport CommentItem from './CommentItem.vue'\r\nexport default {\r\n  name: 'CommentList',\r\n  components: {\r\n    CommentItem\r\n  },\r\n  props: {\r\n    // articleId未使用\r\n    articleId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    targetId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    totalCount: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    commentList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    type: {\r\n      type: String,\r\n      default: 'a'\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      list: [],\r\n      loading: false,\r\n      finished: false,\r\n      error: false,\r\n      offset: null // 请求下一页数据的页码|偏移量\r\n      // totalCount: 0 // 总数据条数\r\n    }\r\n  },\r\n  created () {\r\n    // 当你手动初始 onLoad 的话，它不会自动开始初始的 loading\r\n    // 所以我们要手动的开启初始 loading\r\n    this.loading = true\r\n    this.onLoad() // 进入文章详情页面时就能够看到评论数\r\n  },\r\n  methods: {\r\n    async onLoad () {\r\n      try {\r\n        // 1. 请求获取数据\r\n        const { data: res } = await getCommentsAPI({\r\n          type: this.type, // 评论类型，a-对文章(article)的评论，c-对评论(comment)的回复\r\n          source: this.targetId, // 源id，文章id或评论id\r\n          offset: this.offset, // 获取评论数据的偏移量，值为评论id，表示从此id的数据向后取，不传表示从第一页开始读取数据\r\n          limit: 10 // 每页大小\r\n        })\r\n        // 2. 将数据添加到列表中\r\n        this.list.push(...res.data.results)\r\n        // 更新总数据条数\r\n        // this.totalCount = res.data.total_count\r\n        this.$emit('update:totalCount', res.data.total_count)\r\n        // 3. 将加载更多的 loading 设置为 false\r\n        this.loading = false\r\n        // 4. 判断是否还有数据\r\n        if (res.data.results.length) {\r\n          this.offset = res.data.last_id // 更新获取下一页数据的页码\r\n        } else {\r\n          this.finished = true // 没有数据了，关闭加载更多\r\n        }\r\n      } catch (error) {\r\n        this.error = true\r\n        this.loading = false\r\n      }\r\n    },\r\n    // 将新的评论添加到评论数组的最顶端\r\n    unshiftComment (item) {\r\n      console.log('unshiftComment:', item)\r\n      this.list.unshift(item)\r\n      // this.list.unshift(item.new_obj)\r\n    },\r\n    // 未使用\r\n    onReplyClick (event) {\r\n      this.$emit('reply-click', event)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommentList.vue?vue&type=template&id=97cf7e58&scoped=true&\"\nimport script from \"./CommentList.vue?vue&type=script&lang=js&\"\nexport * from \"./CommentList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"97cf7e58\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"post-comment\"},[_c('van-field',{staticClass:\"post-field\",attrs:{\"rows\":\"2\",\"autosize\":\"\",\"type\":\"textarea\",\"maxlength\":\"50\",\"placeholder\":\"评论内容\",\"show-word-limit\":\"\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}}),_c('van-button',{staticClass:\"post-btn\",attrs:{\"size\":\"small\",\"disabled\":!_vm.message.length},on:{\"click\":_vm.onAddComment}},[_vm._v(\"发布\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"post-comment\">\r\n    <van-field class=\"post-field\" v-model=\"message\" rows=\"2\" autosize type=\"textarea\" maxlength=\"50\" placeholder=\"评论内容\"\r\n      show-word-limit>\r\n    </van-field>\r\n    <van-button class=\"post-btn\" size=\"small\" @click=\"onAddComment\" :disabled=\"!message.length\">发布</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * 发布成功通过$emit向父组件传递数据\r\n */\r\nimport { addCommentAPI } from '@/api/index'\r\nexport default {\r\n  name: 'CommentPost',\r\n  props: {\r\n    articleId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    targetId: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      message: ''\r\n    }\r\n  },\r\n  methods: {\r\n    async onAddComment () {\r\n      try {\r\n        const message = this.message.trim()\r\n        if (!message) {\r\n          return\r\n        }\r\n        const { data: res } = await addCommentAPI({\r\n          target: this.targetId, // 评论的目标id（评论文章即为文章id，对评论进行回复则为评论id）\r\n          content: message, // 评论内容\r\n          art_id: this.articleId || null // 对文章进行评论，不要传此参数; 对评论内容发表回复时，需要传递此参数，表明所属文章id。\r\n        })\r\n        // 关闭弹层\r\n        this.$toast.success('评论成功')\r\n        // 将发布的内容显示在列表顶部\r\n        // console.log('postSuccess:', res.data.new_obj)\r\n        this.$emit('postSuccess', res.data.new_obj)\r\n        // 清空文本框\r\n        this.message = ''\r\n      } catch (error) {\r\n        this.$toast.fail('评论失败')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.post-comment {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 32px 0 32px 32px;\r\n\r\n  .post-field {\r\n    background-color: #f5f7f9;\r\n  }\r\n\r\n  .post-btn {\r\n    width: 150px;\r\n    border: none;\r\n    padding: 0;\r\n    color: #6ba3d8;\r\n\r\n    // &::before {\r\n    //   display: none;\r\n    // }\r\n  }\r\n\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentPost.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentPost.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommentPost.vue?vue&type=template&id=0d49416e&scoped=true&\"\nimport script from \"./CommentPost.vue?vue&type=script&lang=js&\"\nexport * from \"./CommentPost.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CommentPost.vue?vue&type=style&index=0&id=0d49416e&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d49416e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":_vm.comment.reply_count > 0 ? `${_vm.comment.reply_count}条回复` : '暂无回复',\"left-arrow\":\"\",\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"cross\"},on:{\"click\":function($event){return _vm.$emit('close')}}})]},proxy:true}])}),_c('div',{staticClass:\"scroll-wrap\"},[_c('CommentItem',{attrs:{\"comment\":_vm.comment}}),_c('van-cell',[_vm._v(\"全部回复\")]),_c('CommentList',{ref:\"comment-list\",attrs:{\"targetId\":_vm.comment.com_id,\"type\":\"c\"}})],1),_c('div',{staticClass:\"reply-bottom\"},[_c('van-button',{staticClass:\"write-btn\",attrs:{\"size\":\"small\",\"round\":\"\"},on:{\"click\":function($event){_vm.isPostShow = true}}},[_vm._v(\"写评论\")])],1),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.isPostShow),callback:function ($$v) {_vm.isPostShow=$$v},expression:\"isPostShow\"}},[_c('CommentPost',{attrs:{\"targetId\":_vm.comment.com_id,\"articleId\":_vm.$route.params.articleId},on:{\"postSuccess\":_vm.onPostSuccess}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 头部 -->\r\n    <van-nav-bar :title=\"comment.reply_count > 0 ? `${comment.reply_count}条回复` : '暂无回复'\" left-arrow fixed>\r\n      <template #left>\r\n        <van-icon name=\"cross\" @click=\"$emit('close')\" />\r\n      </template>\r\n    </van-nav-bar>\r\n    <div class=\"scroll-wrap\">\r\n      <CommentItem :comment=\"comment\"></CommentItem>\r\n      <!-- 评论回复区域 -->\r\n      <van-cell>全部回复</van-cell>\r\n      <!-- 复用组件：回复评论列表 -->\r\n      <!-- <CommentList :commentList=\"list\" :targetId=\"comment.com_id\" type=\"c\"></CommentList> -->\r\n      <CommentList ref=\"comment-list\" :targetId=\"comment.com_id\" type=\"c\"></CommentList>\r\n    </div>\r\n\r\n    <div class=\"reply-bottom\">\r\n      <van-button class=\"write-btn\" size=\"small\" round @click=\"isPostShow = true\">写评论</van-button>\r\n    </div>\r\n\r\n    <van-popup v-model=\"isPostShow\" position=\"bottom\">\r\n      <CommentPost :targetId=\"comment.com_id\" @postSuccess=\"onPostSuccess\" :articleId=\"$route.params.articleId\">\r\n      </CommentPost>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CommentItem from './CommentItem.vue'\r\nimport CommentList from './CommentList.vue'\r\nimport CommentPost from './CommentPost.vue'\r\nexport default {\r\n  name: 'CommentReply',\r\n  components: { CommentItem, CommentList, CommentPost },\r\n  props: {\r\n    comment: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      list: [],\r\n      commentClone: this.comment,\r\n      isPostShow: false\r\n    }\r\n  },\r\n  methods: {\r\n    onPostSuccess (data) {\r\n      console.log('回复列表-onPostSuccess:', data)\r\n      // 回复记录+1\r\n      this.commentClone.reply_count++\r\n      // 关闭弹出层\r\n      this.isPostShow = false\r\n      // 将发布内容显示到列表顶部 -- 组件CommentPost传值\r\n      // this.$refs['comment-list'].unshiftComment(data.new_obj)\r\n      this.$refs['comment-list'].unshiftComment(data)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.scroll-wrap {\r\n  position: fixed;\r\n  top: 92px;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 88px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.reply-bottom {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 88px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #fff;\r\n  border-top: 1px solid #d8d8d8;\r\n\r\n  .write-btn {\r\n    width: 60%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentReply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommentReply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommentReply.vue?vue&type=template&id=e26d80fa&scoped=true&\"\nimport script from \"./CommentReply.vue?vue&type=script&lang=js&\"\nexport * from \"./CommentReply.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CommentReply.vue?vue&type=style&index=0&id=e26d80fa&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e26d80fa\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"article-container\">\r\n    <!-- 文章详情ID\r\n    <div>$route.params : {{ $route.params }}</div>\r\n    <div>$route.query : {{ $route.query }}</div>\r\n    <div>props : {{ articleId }}</div> -->\r\n\r\n    <!-- fixed属性：将头部脱离文档标准流，显示在最顶端 -->\r\n    <van-nav-bar fixed class=\"page-nav-bar\" left-arrow title=\"黑马头条\" @click-left=\"$router.back()\"></van-nav-bar>\r\n    <!-- 正文：头部 -->\r\n    <div class=\"main-wrap\">\r\n      <!-- 加载中 -->\r\n      <div class=\"loading-wrap\" v-if=\"loading\">\r\n        <van-loading color=\"#3296fa\" vertical>加载中</van-loading>\r\n      </div>\r\n      <!-- 文章内容部分 -->\r\n      <!-- article.title = undefined = false -->\r\n      <div class=\"article-detail\" v-else-if=\"article.title\">\r\n        <!-- 文章标题 -->\r\n        <h1 class=\"article-title\">{{ article.title }}</h1>\r\n        <!-- 用户信息 -->\r\n        <van-cell class=\"article-author\">\r\n          <template #icon>\r\n            <van-image class=\"avatar\" round fit=\"cover\" src=\"https://img.yzcdn.cn/vant/cat.jpeg\" />\r\n          </template>\r\n          <template #title>\r\n            <div class=\"author-name\">{{ article.aut_name }}</div>\r\n          </template>\r\n          <template #label>\r\n            <div class=\"publish-date\">{{ article.pubdate | relativeTime }}</div>\r\n          </template>\r\n          <template #right-icon>\r\n            <!-- 组件封装：子父组件传值3种方式 -->\r\n            <!-- 1. <FollowUser :isFollowed=\"article.is_followed\" :authorId=\"article.aut_id\" @updateFollowed=\"onUpdateFollow\"/> -->\r\n            <!-- 使用双向绑定方式：传递接收数据 -->\r\n            <!-- 默认 @input=\"article.is_followed = $event\" -->\r\n            <!-- 2. <FollowUser v-model=\"article.is_followed\" :authorId=\"article.aut_id\" /> -->\r\n\r\n            <!-- 3. -->\r\n            <FollowUser :isFollowed.sync=\"article.is_followed\" :authorId=\"article.aut_id\" />\r\n          </template>\r\n        </van-cell>\r\n        <!-- 文章内容 -->\r\n        <div class=\"article-content markdown-body\" ref=\"article-content\" v-html=\"article.content\"></div>\r\n        <van-divider>正文结束</van-divider>\r\n\r\n        <!-- 文章评论列表 -->\r\n        <!--\r\n          <CommentList :targetId=\"articleId\" :totalCount.sync=\"totalCommentCount\" :commentList=\"commentList\"\r\n            @reply-click=\"onReplyClick\">\r\n          </CommentList>\r\n        -->\r\n        <CommentList class=\"comment-list\" ref=\"comment-list\" :targetId=\"articleId\" :totalCount.sync=\"totalCommentCount\"\r\n          @scroll=\"onScroll\" @reply-click=\"onReplyClick\"></CommentList>\r\n        <!-- /文章评论列表 -->\r\n\r\n      </div>\r\n      <!-- 加载失败：404 -->\r\n      <div class=\"error-wrap\" v-else-if=\"error === 404\">\r\n        <van-icon name=\"failure\" />\r\n        <p class=\"text\">该资源不存在或已删除！</p>\r\n      </div>\r\n      <!-- 加载失败：其它未知错误（例如网络原因或服务端异常） -->\r\n      <div class=\"error-wrap\" v-else>\r\n        <van-icon name=\"failure\" />\r\n        <p class=\"text\">内容加载失败！</p>\r\n        <van-button class=\"retry-btn\" @click=\"loadArtcileInfo\">点击重试</van-button>\r\n      </div>\r\n      <!-- /加载失败：其它未知错误（例如网络原因或服务端异常） -->\r\n    </div>\r\n    <!-- 评论区 ArticleCollected ArticleComment ArticleLike-->\r\n    <div class=\"article-comment\">\r\n      <van-button class=\"comment-btn\" type=\"default\" round size=\"small\" @click=\"isPostShow = true\">写评论</van-button>\r\n      <van-icon color=\"#777\" name=\"comment-o\" :badge=\"totalCommentCount\" @click=\"jump\" />\r\n      <!-- <van-icon color=\"#777\" name=\"star-o\" /> 收藏-->\r\n      <ArticleCollected v-model=\"article.is_collected\" :articleId=\"article.art_id\"></ArticleCollected>\r\n      <!-- <van-icon color=\"#777\" name=\"good-job-o\" /> 点赞-->\r\n      <ArticleLike :attitude.sync=\"article.attitude\" :articleId=\"article.art_id\"></ArticleLike>\r\n      <van-icon color=\"#777\" name=\"share\" />\r\n    </div>\r\n\r\n    <!-- 评论文章 -->\r\n    <van-popup v-model=\"isPostShow\" position=\"bottom\">\r\n      <!-- <CommentPost :targetId=\"article.art_id\" @postSuccess=\"postSuccess\"></CommentPost> -->\r\n      <!-- <CommentPost :targetId=\"article.aut_id\" @postSuccess=\"postSuccess\"></CommentPost> -->\r\n      <CommentPost :targetId=\"article.art_id\" @postSuccess=\"onPostSuccess\"></CommentPost>\r\n    </van-popup>\r\n    <!-- /评论文章 -->\r\n\r\n    <!-- 评论回复\r\n      弹出层是懒渲染的：只有在第一次展示的时候才会渲染里面的内容，之后它的关闭和显示都是在切换内容的显示和隐藏\r\n     -->\r\n    <van-popup v-model=\"isReplyShow\" position=\"bottom\" style=\"height: 100%;\">\r\n      <CommentReply v-if=\"isReplyShow\" :comment=\"currComment\" @close=\"isReplyShow = false\"></CommentReply>\r\n    </van-popup>\r\n    <!-- /评论回复 -->\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getArticleByIdAPI } from '@/api/index'\r\nimport { ImagePreview } from 'vant'\r\nimport FollowUser from '@/components/Article/FollowUser.vue'\r\nimport ArticleCollected from '@/components/Article/ArticleCollected.vue'\r\nimport ArticleLike from '@/components/Article/ArticleLike.vue'\r\nimport CommentList from '@/components/Article/CommentList.vue'\r\nimport CommentPost from '@/components/Article/CommentPost.vue'\r\nimport CommentReply from '@/components/Article/CommentReply.vue'\r\nexport default {\r\n  name: 'ArticleIndex',\r\n  components: {\r\n    FollowUser,\r\n    ArticleCollected,\r\n    ArticleLike,\r\n    CommentList,\r\n    CommentPost,\r\n    CommentReply\r\n  },\r\n  props: {\r\n    articleId: {\r\n      type: [Number, String], // 当不确定数据类型时，可以使用数组的形式\r\n      default: null\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      loading: true, // 加载自动开启,数据渲染完成后关闭\r\n      article: {},\r\n      error: 0, // 在 data 中添加一个数据用来控制错误相关元素的显示状态\r\n      // followLoading: false // 防止网络慢用户多次点击按钮导致重复触发点击事件| 移动到子组件中\r\n      totalCommentCount: 0, // 评论区总数\r\n      isPostShow: false, // 控制发布评论的显示状态\r\n      commentList: [],\r\n      // list: this.commentList\r\n      isReplyShow: false, // 控制回复评论显示状态\r\n      currComment: {} // 当前点击回复的评论项目\r\n    }\r\n  },\r\n  created () {\r\n    // 获取文章详情\r\n    this.loadArtcileInfo()\r\n  },\r\n  methods: {\r\n    async loadArtcileInfo () {\r\n      this.loading = true\r\n      try {\r\n        const { data: res } = await getArticleByIdAPI(this.articleId)\r\n        this.article = res.data\r\n        // 转异步： 图片预览数组初始化\r\n        setTimeout(() => {\r\n          this.previewImage()\r\n        }, 0)\r\n      } catch (error) {\r\n        if (error.response && error.response.status === 404) {\r\n          this.error = 404\r\n          this.$toast(error.response.data.message)\r\n        } else { this.$toast('获取失败') }\r\n      }\r\n      this.loading = false\r\n    },\r\n    previewImage () {\r\n      // vue获取dom节点\r\n      const dom = this.$refs['article-content']\r\n      // 伪数组=>真数组\r\n      const imgs = dom.querySelectorAll('img')\r\n\r\n      const images = [...imgs].map(img => img.src)\r\n      imgs.forEach((img, index) => {\r\n        img.onclick = () => {\r\n          ImagePreview({\r\n            images: images,\r\n            startPosition: index,\r\n            closeable: true\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    postSuccess (data) {\r\n      console.log(data)\r\n      // 关闭弹出层\r\n      this.isPostShow = false\r\n      // 将发布内容显示到列表顶部 -- 组件CommentPost传值\r\n      this.commentList.unshift(data.new_obj)\r\n    },\r\n\r\n    onPostSuccess (item) {\r\n      // console.log('onPostSuccess:', item)\r\n      // 文章评论弹出层关闭操作\r\n      this.isPostShow = false\r\n      // 通过ref去调用comment-list的方法将新的评价添加到列表的最顶端\r\n      this.$refs['comment-list'].unshiftComment(item)\r\n    },\r\n    onReplyClick (event) {\r\n      // console.log(event)\r\n      this.currComment = event\r\n      // 显示评论回复弹出层\r\n      this.isReplyShow = true\r\n    },\r\n    jump () {\r\n      this.$toast('122')\r\n    },\r\n    onScroll () {\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import './css/github-markdown.css';\r\n\r\n.article-container {\r\n  .main-wrap {\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    top: 92px;\r\n    bottom: 88px;\r\n    overflow-y: scroll;\r\n    background-color: #fff;\r\n\r\n    .loading-wrap {\r\n      padding: 200px 32px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      background-color: #fff;\r\n    }\r\n\r\n    .article-detail {\r\n      .article-title {\r\n        font-size: 40px;\r\n        padding: 50px 32px;\r\n        margin: 0;\r\n      }\r\n\r\n      .article-author {\r\n        padding: 0 32px;\r\n\r\n        .avatar {\r\n          width: 70px;\r\n          height: 70px;\r\n          margin-right: 12px;\r\n        }\r\n\r\n        .author-name {\r\n          font-size: 24px;\r\n          color: #3a3a3a;\r\n        }\r\n\r\n        .van-cell__label {\r\n\r\n          .publish-date {\r\n            font-size: 24px;\r\n          }\r\n        }\r\n\r\n        .follow-btn {\r\n          width: 180px;\r\n          height: 58px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .error-wrap {\r\n      padding: 200px 32px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      flex-direction: column;\r\n      background-color: #fff;\r\n\r\n      .van-icon {\r\n        font-size: 122px;\r\n        color: #b4b4b4;\r\n      }\r\n\r\n      .text {\r\n        font-size: 30px;\r\n        color: #666666;\r\n        margin: 33px 0 46px;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  .article-comment {\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    height: 88px;\r\n    line-height: 88px;\r\n    border-top: 1px solid #d8d8d8;\r\n    background-color: #fff;\r\n\r\n    .comment-btn {\r\n      width: 280px;\r\n      height: 46px;\r\n      line-height: 46;\r\n      border: 2px solid #eee;\r\n      color: #a7a7a7;\r\n    }\r\n\r\n    .van-icon {\r\n      font-size: 40px;\r\n\r\n      .van-info {\r\n        font-size: 16px;\r\n        background-color: #e22829;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1ad7c486&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1ad7c486&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ad7c486\",\n  null\n  \n)\n\nexport default component.exports","import request from '../utils/request'\r\n\r\n/**\r\n * 获取用户自己的信息\r\n */\r\n//  export const getUserInfo = () => {\r\n//   return request({\r\n//     method: 'GET',\r\n//     url: '/v1_0/user',\r\n//     // 发送请求头数据\r\n//     headers: {\r\n//       // 注意：该接口需要授权才能访问\r\n//       //       token的数据格式：Bearer token数据，注意 Bearer 后面有个空格\r\n//       Authorization: `Bearer ${store.state.user.token}`\r\n//     }\r\n//   })\r\n// }\r\n\r\n/**\r\n * 获取用户自己的信息\r\n * token数据由请求拦截器完成\r\n */\r\nexport const getUserInfo = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/user'\r\n  })\r\n}\r\n\r\n/**\r\n * 获取当前登录用户的个人资料\r\n */\r\n export const getUserProfile = target => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/user/profile'\r\n  })\r\n}\r\n\r\n/**\r\n * 更新用户资料\r\n */\r\n export const updateUserProfile = data => {\r\n  return request({\r\n    method: 'PATCH',\r\n    url: '/v1_0/user/profile',\r\n    data\r\n  })\r\n}\r\n/**\r\n * 更新用户照片资料\r\n */\r\n export const updateUserPhoto = data => {\r\n  return request({\r\n    method: 'PATCH',\r\n    url: '/v1_0/user/photo',\r\n    data\r\n  })\r\n}\r\n","import request from '../utils/request'\r\n/**\r\n * 获取文章列表\r\n */\r\n export const getArticles = params => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/articles',\r\n    params\r\n  })\r\n}\r\n\r\n/**\r\n * 获取文章\r\n */\r\n export const getArticleById = articleId => {\r\n  return request({\r\n    method: 'GET',\r\n    url: `/v1_0/articles/${articleId}`\r\n  })\r\n}\r\n\r\n/**\r\n * 关注用户\r\n */\r\n export const addFollow = target => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/user/followings',\r\n    data: {\r\n      target\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 取消关注用户\r\n */\r\nexport const deleteFollow = target => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/v1_0/user/followings/${target}`\r\n  })\r\n}\r\n\r\n/**\r\n * 收藏文章\r\n */\r\n export const addCollect = target => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/article/collections',\r\n    data: {\r\n      target\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 取消收藏文章\r\n */\r\nexport const deleteCollect = target => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/v1_0/article/collections/${target}`\r\n  })\r\n}\r\n\r\n/**\r\n * 点赞文章\r\n */\r\n export const addLike = target => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/article/likings',\r\n    data: {\r\n      target\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 取消点赞文章\r\n */\r\nexport const deleteLike = target => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/v1_0/article/likings/${target}`\r\n  })\r\n}\r\n\r\n/**\r\n * 获取文章评论列表\r\n */\r\n export const getComments = params => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/comments',\r\n    params\r\n  })\r\n}\r\n","import request from '../utils/request'\r\n\r\n/**\r\n * 获取用户频道列表\r\n */\r\n export const getUserChannels = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/user/channels'\r\n  })\r\n}\r\n/**\r\n * 获取所有频道列表\r\n */\r\n export const getAllChannel = params => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/channels',\r\n    params\r\n  })\r\n}\r\n\r\n/**\r\n * 添加用户频道\r\n */\r\n export const addUserChannel = channel => {\r\n  return request({\r\n    method: 'PATCH',\r\n    url: '/v1_0/user/channels',\r\n    data: {\r\n      channels: [channel]\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 删除用户指定频道\r\n */\r\n export const deleteUserChannel = channelId => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/v1_0/user/channels/${channelId}`\r\n  })\r\n}\r\n","import request from '../utils/request'\r\n// 搜索联想词接口\r\nexport const getSearchSuggestions = query => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/suggestion',\r\n    params: {\r\n      q: query\r\n    }\r\n  })\r\n}\r\n// 搜索结果接口\r\nexport const getSearchResult = params => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/search',\r\n    params\r\n  })\r\n}\r\n","import request from '@/utils/request'\r\n/**\r\n * 获取文章评论列表\r\n */\r\n export const getComments = params => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/v1_0/comments',\r\n    params\r\n  })\r\n}\r\n/**\r\n * 评论点赞\r\n */\r\n export const addCommentLike = target => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/comment/likings',\r\n    data: {\r\n      target\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 取消评论点赞\r\n */\r\nexport const deleteCommentLike = target => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/v1_0/comment/likings/${target}`\r\n  })\r\n}\r\n\r\n/**\r\n * 发布文章评论或评论回复\r\n * target 评论的目标id（评论文章即为文章id，对评论进行回复则为评论id）\r\n * content 评论内容\r\n * art_id 文章id，对评论内容发表回复时，需要传递此参数，表明所属文章id。对文章进行评论，不要传此参数。\r\n */\r\n export const addComment = data => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/v1_0/comments',\r\n    data\r\n  })\r\n}\r\n","import { login } from './login'\r\nimport { getUserInfo, getUserProfile, updateUserProfile, updateUserPhoto } from './user'\r\nimport { getArticles, getArticleById, addFollow, deleteFollow, addCollect, deleteCollect, addLike, deleteLike } from './article'\r\nimport { getUserChannels, getAllChannel, addUserChannel, deleteUserChannel } from './channel'\r\nimport { getSearchSuggestions, getSearchResult } from './home'\r\nimport { getComments, addCommentLike, deleteCommentLike, addComment } from './comment'\r\n// 作为公共出口导出接口\r\nexport const loginAPI = login\r\nexport const getUserInfoAPI = getUserInfo\r\nexport const getUserChannelsAPI = getUserChannels\r\nexport const getArticlesAPI = getArticles\r\nexport const getArticleByIdAPI = getArticleById\r\nexport const getAllChannelAPI = getAllChannel\r\nexport const addUserChannelAPI = addUserChannel\r\nexport const deleteUserChannelAPI = deleteUserChannel\r\nexport const getSearchSuggestionsAPI = getSearchSuggestions\r\nexport const getSearchResultAPI = getSearchResult\r\nexport const addFollowAPI = addFollow\r\nexport const deleteFollowAPI = deleteFollow\r\nexport const addCollectAPI = addCollect\r\nexport const deleteCollectAPI = deleteCollect\r\nexport const addLikeAPI = addLike\r\nexport const deleteLikeAPI = deleteLike\r\nexport const getCommentsAPI = getComments\r\nexport const addCommentLikeAPI = addCommentLike\r\nexport const deleteCommentLikeAPI = deleteCommentLike\r\nexport const addCommentAPI = addComment\r\nexport const getUserProfileAPI = getUserProfile\r\nexport const updateUserProfileAPI = updateUserProfile\r\nexport const updateUserPhotoAPI = updateUserPhoto\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","back","loading","_v","article","title","_s","scopedSlots","_u","key","fn","proxy","aut_name","_f","pubdate","is_followed","aut_id","$set","ref","domProps","content","articleId","totalCommentCount","onScroll","onReplyClick","error","loadArtcileInfo","isPostShow","jump","art_id","model","value","is_collected","callback","$$v","expression","attitude","onPostSuccess","staticStyle","isReplyShow","currComment","_e","staticRenderFns","isFollowed","followLoading","onFollow","name","props","type","default","authorId","data","methods","component","class","collected","onCollected","setTimeout","liked","onLiked","status","finished","onLoad","_l","list","comment","index","$emit","aut_photo","reply_count","like","is_likeing","commentLoading","onCommentLike","like_count","commentClone","created","console","components","CommentItem","targetId","totalCount","commentList","offset","source","limit","unshiftComment","message","length","onAddComment","target","com_id","$route","params","CommentList","CommentPost","FollowUser","ArticleCollected","ArticleLike","CommentReply","previewImage","imgs","img","ImagePreview","images","startPosition","closeable","postSuccess","getUserInfo","request","method","url","getUserProfile","updateUserProfile","updateUserPhoto","getArticles","getArticleById","addFollow","deleteFollow","addCollect","deleteCollect","addLike","deleteLike","getUserChannels","getAllChannel","addUserChannel","channel","channels","deleteUserChannel","channelId","getSearchSuggestions","query","q","getSearchResult","getComments","addCommentLike","deleteCommentLike","addComment","getUserInfoAPI","getUserChannelsAPI","getArticlesAPI","getArticleByIdAPI","getAllChannelAPI","addUserChannelAPI","deleteUserChannelAPI","getSearchSuggestionsAPI","getSearchResultAPI","addFollowAPI","deleteFollowAPI","addCollectAPI","deleteCollectAPI","addLikeAPI","deleteLikeAPI","getCommentsAPI","addCommentLikeAPI","deleteCommentLikeAPI","addCommentAPI","getUserProfileAPI","updateUserProfileAPI","updateUserPhotoAPI"],"sourceRoot":""}